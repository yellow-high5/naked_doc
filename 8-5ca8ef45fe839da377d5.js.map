{"version":3,"sources":["webpack:///./node_modules/@styled-icons/fa-solid/TimesCircle/TimesCircle.esm.js","webpack:///./src/components/search/lunr/styles.tsx","webpack:///./src/components/search/lunr/searchBar.tsx"],"names":["TimesCircle","props","ref","iconAttrs","iconVerticalAlign","iconViewBox","fill","d","key","displayName","PoweredBy","className","href","SearchIcon","Search","TimesCircleIcon","Input","theme","shortTrans","smallBorderRadius","Form","Root","HitsWrapper","hidden","darkGray","lightGray","lightBlue","darkBlue","gray","SearchBar","useState","query","setQuery","results","setResults","focus","setFocus","useRef","handler","events","detectClickOutside","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","useClickOutside","displayResult","length","window","__LUNR__","lunrIndex","searchResults","index","search","map","store","onSubmit","preventDefault","type","placeholder","aria-label","onChange","value","onFocus","onClick","slug","title","description","to"],"mappings":"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","file":"8-5ca8ef45fe839da377d5.js","sourcesContent":["import { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var TimesCircle = React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return React.createElement(StyledIconBase, __assign({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"-.125em\",\n    iconViewBox: \"0 0 512 512\"\n  }, props, {\n    ref: ref\n  }), React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z\",\n    key: \"k0\"\n  }));\n});\nTimesCircle.displayName = 'TimesCircle';\nexport var TimesCircleDimensions = {\n  height: undefined,\n  width: undefined\n};","import React from 'react';\n\nexport const PoweredBy = () => (\n  <span className=\"poweredBy\">\n    Searching by{` `}\n    <a href=\"https://lunrjs.com/\">Lunr</a>\n  </span>\n);\n","import { css } from '@emotion/core';\nimport styled from '@emotion/styled';\nimport { Link } from 'gatsby';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Search } from 'styled-icons/fa-solid/Search';\nimport { TimesCircle } from 'styled-icons/fa-solid/TimesCircle';\n\nimport { PoweredBy } from './styles';\n\nconst SearchIcon = styled(Search)`\n  width: 1em;\n  pointer-events: none;\n  margin-right: 10px;\n  position: absolute;\n  left: 15px;\n  color: #2fd2c5;\n`;\n\nconst TimesCircleIcon = styled(TimesCircle)`\n  width: 1em;\n  margin-right: 10px;\n  position: relative;\n  right: 30px;\n  color: #2fd2c5;\n`;\n\nconst focus = props => css`\n  background: white;\n  color: ${props => props.theme.darkBlue};\n  cursor: text;\n  width: 5em;\n  + ${SearchIcon} {\n    color: ${props => props.theme.darkBlue};\n    margin: 0.3em;\n  }\n`;\n\nconst collapse = props => css`\n  width: 0;\n  cursor: pointer;\n  color: ${props => props.theme.lightBlue};\n  + ${SearchIcon} {\n    color: white;\n  }\n  ${props => props.focus && focus()}\n  margin-left: ${props => (props.focus ? `-1.6em` : `-1em`)};\n  padding-left: ${props => (props.focus ? `1.6em` : `1em`)};\n  ::placeholder {\n    color: ${props => props.theme.gray};\n  }\n`;\n\nconst expand = props => css`\n  background: ${props => props.theme.veryLightGray};\n  width: 6em;\n  margin-left: -1.6em;\n  padding-left: 1.6em;\n  + ${SearchIcon} {\n    margin: 0.3em;\n  }\n`;\n\nconst collapseExpand = props => css`\n  ${props => (props.collapse ? collapse() : expand())}\n`;\n\nconst Input = styled.input`\n  outline: none;\n  border: none;\n  font-size: 1em;\n  background: white;\n  transition: ${props => props.theme.shortTrans};\n  border-radius: ${props => props.theme.smallBorderRadius};\n  {collapseExpand}\n`;\n\nconst Form = styled.form`\n  display: flex;\n  align-items: center;\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n    margin-left: 15px;\n  }\n`;\n\nconst Root = styled.div`\n  position: relative;\n  display: grid;\n  grid-gap: 1em;\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n  }\n`;\n\nconst HitsWrapper = styled.div`\n  display: ${props => (props.hidden ? `none` : `grid`)};\n  max-height: 80vh;\n  overflow: scroll;\n  z-index: 2;\n  -webkit-overflow-scrolling: touch;\n  position: absolute;\n  right: 0;\n  top: calc(100% + 0.5em);\n  width: 80vw;\n  max-width: 30em;\n  box-shadow: 0 0 5px 0;\n  padding: 0.7em 1em 0.4em;\n  background: white;\n  @media only screen and (max-width: 991px) {\n    width: 400px;\n    max-width: 400px;\n  }\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n    max-width: 500px;\n  }\n  border-radius: ${props => props.theme.smallBorderRadius};\n  > * + * {\n    padding-top: 1em !important;\n    border-top: 2px solid ${props => props.theme.darkGray};\n  }\n  li + li {\n    margin-top: 0.7em;\n    padding-top: 0.7em;\n    border-top: 1px solid ${props => props.theme.lightGray};\n  }\n  * {\n    margin-top: 0;\n    padding: 0;\n    color: black !important;\n  }\n  ul {\n    list-style: none;\n  }\n  mark {\n    color: ${props => props.theme.lightBlue};\n    background: ${props => props.theme.darkBlue};\n  }\n  header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.3em;\n    h3 {\n      color: black;\n      background: ${props => props.theme.gray};\n      padding: 0.1em 0.4em;\n      border-radius: ${props => props.theme.smallBorderRadius};\n    }\n  }\n  h3 {\n    color: black;\n    margin: 0 0 0.5em;\n  }\n  h4 {\n    color: black;\n    margin-bottom: 0.3em;\n  }\n`;\n\nconst useClickOutside = (ref, handler, events = [`mousedown`, `touchstart`]) => {\n  const detectClickOutside = event =>\n    ref && ref.current && !ref.current.contains(event.target) && handler();\n\n  useEffect(() => {\n    for (const event of events) document.addEventListener(event, detectClickOutside);\n    return () => {\n      for (const event of events) document.removeEventListener(event, detectClickOutside);\n    };\n  });\n};\n\n// Search component\nconst SearchBar = () => {\n  const [query, setQuery] = useState(``);\n  const [results, setResults] = useState([]);\n  const [focus, setFocus] = useState(false);\n\n  const ref = useRef(null);\n  useClickOutside(ref, () => setFocus(false));\n  const displayResult = query.length > 0 && focus ? 'showResults' : 'hideResults';\n\n  useEffect(() => {\n    if (!query || !window.__LUNR__) {\n      setResults([]);\n      return;\n    }\n    const lunrIndex = window.__LUNR__['ja'];\n    const searchResults = lunrIndex.index.search(query);\n    setResults(\n      searchResults.map(({ ref }) => {\n        return lunrIndex.store[ref];\n      })\n    );\n  }, [query]);\n\n  return (\n    <Root ref={ref}>\n      <Form\n        className={'formElement'}\n        onSubmit={event => {\n          event.preventDefault();\n        }}\n      >\n        <SearchIcon />\n        <Input\n          className={'searchInput '}\n          type=\"text\"\n          placeholder=\"Search\"\n          aria-label=\"Search\"\n          onChange={event => {\n            setQuery(event.target.value);\n          }}\n          onFocus={() => setFocus(true)}\n          value={query}\n        />\n        {query ? (\n          <TimesCircleIcon\n            onClick={() => {\n              setQuery(``);\n              setFocus(false);\n            }}\n          />\n        ) : null}\n      </Form>\n      <HitsWrapper className={'hitWrapper ' + displayResult} hidden={!(query.length > 0 && focus)}>\n        {results.length > 0\n          ? results.map(({ slug, title, description }) => {\n              return (\n                <li key={slug}>\n                  <Link to={slug} onClick={() => setFocus(false)}>\n                    <h3>{title}</h3>\n                    <span>{description}</span>\n                  </Link>\n                </li>\n              );\n            })\n          : `No result for '${query}'`}\n        <PoweredBy />\n      </HitsWrapper>\n    </Root>\n  );\n};\n\nexport default SearchBar;\n"],"sourceRoot":""}
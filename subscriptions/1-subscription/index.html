<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><title>Naked Doc | Simple startup document</title><link rel="shortcut icon" type="image/svg" href="https://raw.githubusercontent.com/yellow-high5/naked_doc/b2c80ec4028067363dee135b59ddad1842ca8a04/src/components/static/images/logo.svg"/><noscript></noscript><meta name="generator" content="Gatsby 2.21.35"/><link rel="sitemap" type="application/xml" href="/naked_doc/sitemap.xml"/><title data-react-helmet="true">Set up GraphQL Subscriptions using Apollo Client | GraphQL React Apollo Hooks Tutorial</title><link data-react-helmet="true" rel="canonical" href="http://localhost:8000//naked_doc/subscriptions/1-subscription"/><meta data-react-helmet="true" name="title" content="Set up GraphQL Subscriptions using Apollo Client | GraphQL React Apollo Hooks Tutorial"/><meta data-react-helmet="true" name="description" content="You will learn how to configure GraphQL Subscriptions using React Apollo Client by installing dependencies like apollo-link-ws, subscriptions-transport-ws. This will also have authorization token setup"/><meta data-react-helmet="true" property="og:title" content="Set up GraphQL Subscriptions using Apollo Client | GraphQL React Apollo Hooks Tutorial"/><meta data-react-helmet="true" property="og:description" content="You will learn how to configure GraphQL Subscriptions using React Apollo Client by installing dependencies like apollo-link-ws, subscriptions-transport-ws. This will also have authorization token setup"/><meta data-react-helmet="true" property="twitter:title" content="Set up GraphQL Subscriptions using Apollo Client | GraphQL React Apollo Hooks Tutorial"/><meta data-react-helmet="true" property="twitter:description" content="You will learn how to configure GraphQL Subscriptions using React Apollo Client by installing dependencies like apollo-link-ws, subscriptions-transport-ws. This will also have authorization token setup"/><link as="script" rel="preload" href="/naked_doc/webpack-runtime-421e1ef288e8ca6d1ca9.js"/><link as="script" rel="preload" href="/naked_doc/framework-3bef749eac301960e51a.js"/><link as="script" rel="preload" href="/naked_doc/app-f62b6fc3546e88d16ee5.js"/><link as="fetch" rel="preload" href="/naked_doc/page-data/subscriptions/1-subscription/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/naked_doc/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><style data-emotion-css="0"></style><div class="navBarWrapper"><nav class="navBarDefault"><div class="navBarHeader"><a href="http://localhost:8000/" class="navBarBrand"><img class="img-responsive displayInline" src="https://github.com/yellow-high5/naked_doc/blob/master/src/components/static/images/header-logo.png?raw=true" alt="logo"/></a><div class="headerTitle displayInline"></div></div><div class="searchWrapper hiddenMobile navBarUL"><div></div></div><div id="navbar" class="topnav"><div class="visibleMobile"><style data-emotion-css="8uxxw2">.css-8uxxw2{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175,158,232,0.4);}@media only screen and (max-width:1023px){.css-8uxxw2{width:100%;height:100vh;}}@media (min-width:767px) and (max-width:1023px){.css-8uxxw2{padding-left:0;}}@media only screen and (max-width:767px){.css-8uxxw2{padding-left:0px;height:auto;}}</style><aside class="css-8uxxw2 e6h4lgx1"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/naked_doc/introduction">Course Introduction</a></li><li class=" item "><a href="/naked_doc/intro-to-graphql">Intro to GraphQL<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/setup">Tutorial &amp; boilerplate setup</a></li><li class=" item "><a href="/naked_doc/apollo-client">Set up a GraphQL client with Apollo</a></li><li class=" item "><a href="/naked_doc/queries">Queries<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/mutations-variables">Mutations &amp; Query variables<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/optimistic-update-mutations">Optimistic UI updates after mutations<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/subscriptions">Subscriptions to show online users<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/realtime-feed">Realtime Feed<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/what-next">What next?</a></li></ul></li></ul></aside><hr/></div><ul class="navBarUL navBarNav navBarULRight"><li class="divider hiddenMobile"></li><li class="githubBtn"><span><a href="https://github.com/yellow-high5/naked_doc" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li><li><style data-emotion-css="1bfhd0f">.css-1bfhd0f{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;width:100%;padding:0 20px 0 25px;}.css-1bfhd0f .switch{position:relative;display:inline-block;width:50px;height:20px;}.css-1bfhd0f .switch input{opacity:0;width:0;height:0;}.css-1bfhd0f .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;}.css-1bfhd0f .slider:before{position:absolute;content:'';height:30px;width:30px;left:0px;bottom:4px;top:0;bottom:0;margin:auto 0;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;box-shadow:0 0px 15px #2020203d;background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD2UlEQVRIia2UXUxTZxjH/+ftaS20tKX0UAothbZUBOoKTKdhm8xvSJYsKnNuyZZ9BLJNk2m2uXjhxWayhYvtYouZbLsw7kpdoiHLJqJzUyMyp0P8IEYF1gL9oLQ9LbTn9JyeXYAbzioU9yTvzfP83//veT8pZBm1TTsYJl/zYTQS7yJhcu7ChS8Sj9LLsgUU2F3KAq3+6+Z1K1sThH/b6X6uUVeydMR7q2f4fwEE71xJVLhWuV/cvNb98pYNuUsqyyuUSvlGo22Zvr+36/RjAwBAWViVU+koe95hM8vytXlwu5xqmqYbFuUvfuba7ycPzdbSCwEQSKFgaCIGoOBebvWz9cRcUrhWJiOnvv/y/TX/ahcQUloWTIvp5H/zTrsFzRsaVr2yvf3TxwJQRHTodBp9plrj0/UyjVbTtmz9LsuCASZGby02MTkPq7/2UnO+tczw1YIBhJa/4a6peGi91FKEXFVuXXXjO0VZA2rXb29a07i8UC5/9P1w2i2MOk/uyBpgNOr3b9u8LuP+36djChYZGcNTWQGaXt3b/dned63z0ep0GkgilszrHdSsbrVbios6P9+3067VqKj5zBF4ERQF0Cs2vdegJIotkWj8YIpwf10/8d1EdUuLQhY1llAiKbOYC3YurbJVtb6+ya5QyOfjjclJDsMeHwSev0onWJ5y1tja6lyarV6fP+l8a19SFNJKplxP1VTa1CuXuwylZuO8jAFAEESMB2MY8wW5UDR6nu7r3n/Oav4k8ua2F0w5uQoYTVrI6QV9UUinJQT8LNKihEHPaFggyZsEAAhFjg3cHkSKFxHwsUjxQtbmgpDG2GgEXFLAqD8AQsivf3R2TBEAGPR4vrk1ODQEADwnYMQbBhudgiRJcxpLkgSWTcDrmQDPTTd2+HjXhGd4qA2Y+a79dy/5jKX14EW+sdxipgEgMZUCyyYgCiIoavriEEKBoiiIYhocl0KMTSAYiGEqzgMzvXT/1sP7/OMfnzrafvofAAAM/PnLRZNjhYMmxGUyMmS6O4DjBMRjHNhoApHwJCLhSUQjCcRjHLikgNmLvHz1Rvpy/8APRw7s3nUvd99p9veeOG4oe7LIPx56wmmzZjhpamY8GD+fOZ/qvXTt2JGO3Vtn5x8w6bv4048qg0vsudJXp8pR5piMTEZDAOBTKXhGfDh4uDMQGo/sOfrtRx9kailjVLe0KOxqd7tOq96oVuUWM/r8PE2eCnqdFoHQBG4PeafGxgJhScLJu0PePTfPdoxl8pnz2dc27WBSCclqMGgXy2mZTUZROjYevxONxM9cP3vgxlzz/wYACnimgcgpDAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center;}.css-1bfhd0f input:checked + .slider{background:linear-gradient(to right,#fefb72,#f0bb31);}.css-1bfhd0f input:checked + .slider:before{-webkit-transform:translateX(24px);-ms-transform:translateX(24px);-webkit-transform:translateX(24px);-ms-transform:translateX(24px);transform:translateX(24px);background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVRIibWW30tTYRjHv687c3O6JU5Dg9AurBz7UYaBUTG2oVEXGuRNEI5ZeNxNf0EgdNVFFwn5ox9QlJSQBUURhTYyM68qV6nRDyUYhq2s6ebZzs7TRUjbOu9oi57L9/k+n+8573ue57xADuHwiM12t39fLjVCLmIiVkkElktNQS7ifCLNYLu70/KvwExGmoGiCMzu7mrPF+7wiD5ZQwrX4OWjs6+JWF4mDo/og4JE8MG5mdR11QOzufxexoimRvouA0CN16svC+lainQJH8BYTBIumuJVw4FAt5wKfznafyWTxf0i1kwsm4QPhYI8tL+xsMJsYgJBj6+RpHx7bHlRVjRts/PyFh48qwEANDQdO1lfGz3e33HLCCX6a1EwA8WNgGEHxFPhWPBd4vTTewMneAwNL1Hj9epthkhvh3Oiqtr85XdCiQHSWyAZRmmFTfs+tFprNpacmZubU9Q43D4oC+laWhumN+7ZOq8uiL3C7togDuwyVsSK7Yd4HMHhEZuJWGVmokgnHS43RnW8QgDAygTKS62CQR/vtLu7/tAyRgsCUQFTb3/GKCsdgBwGKRIYMUbEVBnC1EjvfbXa+qbOWDhi2Asg61uEl0hekbT9wdGe62p57hmY4lXDw5OW0OPpai58bHYz7ozHw5N3e4Z4Gq5BINAtzy+uGxx8su07T3N1vH7542c6D4C7m9w+WOvOStOPWWNJ4lrrzpkN601RPRGwGDGs3nxmWViVCts+fTNaU7v+rwwyW9/pdApL2rqDxTrpKMCwIhVeePGw78bak2eOlqzh8Ig+h0s8opazu7vabS6/Vy1nc/m9akMy7QzsTaI121zJFsHR3ktEjFk9/jqugSZJSj7wVBMtJdO2Pc3g+cjAm3zhPMZ//yfndKtgjBYAtZHAj58VKxN68Ki4UQAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center;}.css-1bfhd0f .slider.round{border-radius:34px;}.css-1bfhd0f .slider.round:before{border-radius:50%;}</style><div class="css-1bfhd0f etbxlfs0"><label id="switch" class="switch"><input type="checkbox" id="slider" checked=""/><span class="slider round"></span></label></div></li></ul></div></nav><style data-emotion-css="1gvjyvp">.css-1gvjyvp{height:60px;box-shadow:0 3px 6px 0 rgba(0,0,0,0.16);background-color:#f8f8f8;position:relative;display:none;}@media (max-width:767px){.css-1gvjyvp{display:block;}}</style><div class="css-1gvjyvp e1dhb09e0"><div class="navBarDefault removePadd"><span class="navBarToggle" role="button" tabindex="0"><span class="iconBar"></span><span class="iconBar"></span><span class="iconBar"></span></span></div><div class="searchWrapper"><div></div></div></div></div><style data-emotion-css="139q0o8">.css-139q0o8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#fff;}.css-139q0o8 .sideBarUL li a{color:#3B454E;}.css-139q0o8 .sideBarUL .item > a:hover{background-color:#1ed3c6;color:#fff !important;}@media only screen and (max-width:767px){.css-139q0o8{display:block;}}</style><div class="css-139q0o8 eitzbh70"><style data-emotion-css="192n44p">.css-192n44p{width:298px;}</style><div class="hiddenMobile css-192n44p eitzbh73"><style data-emotion-css="8uxxw2">.css-8uxxw2{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175,158,232,0.4);}@media only screen and (max-width:1023px){.css-8uxxw2{width:100%;height:100vh;}}@media (min-width:767px) and (max-width:1023px){.css-8uxxw2{padding-left:0;}}@media only screen and (max-width:767px){.css-8uxxw2{padding-left:0px;height:auto;}}</style><aside class="css-8uxxw2 e6h4lgx1"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/naked_doc/introduction">Course Introduction</a></li><li class=" item "><a href="/naked_doc/intro-to-graphql">Intro to GraphQL<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/setup">Tutorial &amp; boilerplate setup</a></li><li class=" item "><a href="/naked_doc/apollo-client">Set up a GraphQL client with Apollo</a></li><li class=" item "><a href="/naked_doc/queries">Queries<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/mutations-variables">Mutations &amp; Query variables<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/optimistic-update-mutations">Optimistic UI updates after mutations<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/subscriptions">Subscriptions to show online users<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/realtime-feed">Realtime Feed<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M7.33 24l-2.83-2.829 9.339-9.175-9.339-9.167 2.83-2.829 12.17 11.996z"></path></svg></button></a></li><li class=" item "><a href="/naked_doc/what-next">What next?</a></li></ul></li></ul></aside></div><style data-emotion-css="zj4uvr">.css-zj4uvr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;padding-top:3rem;background:#fff;}.css-zj4uvr table tr{background:#fff;}@media only screen and (max-width:1023px){.css-zj4uvr{padding-left:0;margin:0 10px;padding-top:3rem;}}</style><main class="css-zj4uvr eitzbh71"><style data-emotion-css="14zj307">@media only screen and (max-width:50rem){.css-14zj307{width:100%;position:relative;}}</style><div class="css-14zj307 eitzbh72"><div class="titleWrapper"><style data-emotion-css="1gg19kx">.css-1gg19kx{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #1ed3c6;padding:0 16px;-webkit-flex:1;-ms-flex:1;flex:1;margin-top:0;padding-top:0;color:#000;}</style><h1 class="css-1gg19kx e105w3oq0">Subscription</h1><style data-emotion-css="qu2iew">.css-qu2iew{padding:1rem 1.5rem;text-align:right;}.css-qu2iew a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211,220,228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36,42,49);background-color:rgb(255,255,255);box-shadow:rgba(116,129,141,0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-qu2iew a:hover{background-color:rgb(245,247,249);}</style><div class="mobileView css-qu2iew e105w3oq1"><a href="https://github.com/yellow-high5/naked_doc/tree/master/content/subscriptions/1-subscription.md" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit this page</a></div></div><style data-emotion-css="1qktglx">.css-1qktglx{max-width:750px;color:#3B454E;}.css-1qktglx ul,.css-1qktglx ol{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0px;padding:0px 0px 0px 2em;}.css-1qktglx ul li,.css-1qktglx ol li{font-size:16px;line-height:1.8;font-weight:400;}.css-1qktglx a{-webkit-transition:color 0.15s;transition:color 0.15s;color:#1000EE;}.css-1qktglx code{border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:0.9375em;background:#fff;}@media (max-width:767px){.css-1qktglx{padding:0 15px;}}</style><div class="css-1qktglx e105w3oq2"><p class="paragraph">When we had initially set up Apollo, we used Apollo Boost to install the required dependencies. But subscriptions is an advanced use case which Apollo Boost does not support. So we have to install more dependencies to set up subscriptions.</p><h3 class="heading3" id="reactapollosubscriptionssetup">React Apollo Subscriptions Setup</h3><style data-emotion-css="fkgcw9">.css-fkgcw9{padding:16px;background:rgb(245,247,249);}</style><pre class="css-fkgcw9 e1fjoryl0"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain"> $ npm install apollo</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">link</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ws subscriptions</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">transport</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ws </span><span class="token operator" style="color:rgb(212, 212, 212)">--</span><span class="token plain">save</span></div></pre></pre></pre><p class="paragraph">Now we need to update our <code>ApolloClient</code> instance to point to the subscription server.</p><p class="paragraph">Open <code>src/components/App.js</code> and update the following imports:</p><a href="https://github.com/hasura/learn-graphql/blob/master/tutorials/frontend/react-apollo-hooks/app-final/src/components/App.js" class="githubSection"><img class="githubIcon" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="github"/>src/components/App.js</a><pre class="css-fkgcw9 e1fjoryl0"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token maybe-class-name">HttpLink</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;apollo-link-http&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token maybe-class-name">WebSocketLink</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;apollo-link-ws&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">Update the createApolloClient function to integrate WebSocketLink.</p><pre class="css-fkgcw9 e1fjoryl0"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">createApolloClient</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">authToken</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ApolloClient</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain">   link</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">HttpLink</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">   link</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">WebSocketLink</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain">     uri</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;https://hasura.io/learn/graphql&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">     uri</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;wss://hasura.io/learn/graphql&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">     options</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">       reconnect</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">       connectionParams</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          headers</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token maybe-class-name">Authorization</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token template-string string" style="color:rgb(206, 145, 120)">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(212, 212, 212)">${</span><span class="token template-string interpolation">authToken</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token template-string template-punctuation string" style="color:rgb(206, 145, 120)">`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="background-color:rgba(76, 175, 80, 0.2)"><span class="token plain"></span><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">+</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    cache</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">InMemoryCache</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">Note that we are replacing HttpLink with WebSocketLink and hence all GraphQL queries go through a single websocket connection.</p></div><div class="addPaddTopBottom"><style data-emotion-css="qlf7aj">.css-qlf7aj{margin:0px;padding:0px;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px);}.css-qlf7aj .previousBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230,236,241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116,129,141,0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-qlf7aj .nextBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230,236,241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116,129,141,0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-qlf7aj .nextBtn:hover,.css-qlf7aj .previousBtn:hover{-webkit-text-decoration:none;text-decoration:none;border:1px solid #1ed3c6;}.css-qlf7aj .nextBtn:hover .rightArrow,.css-qlf7aj .previousBtn:hover .leftArrow{color:#1ed3c6;}.css-qlf7aj .leftArrow{display:block;margin:0px;color:rgb(157,170,182);-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-right:16px;}.css-qlf7aj .rightArrow{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-left:16px;display:block;margin:0px;color:rgb(157,170,182);}.css-qlf7aj .nextPreviousTitle{display:block;margin:0px;padding:0px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;}.css-qlf7aj .nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500;}@media (max-width:767px){.css-qlf7aj{display:block;padding:0 15px;}.css-qlf7aj .previousBtn{margin-bottom:20px;}}</style><div class="css-qlf7aj e1fg2jjz0"><a class="previousBtn" href="/naked_doc/subscriptions"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>Subscriptions to show online users</span></div></div></a><a class="nextBtn" href="/naked_doc/subscriptions/2-apollo-subscription"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>Apollo useSubscription React hook</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><style data-emotion-css="gqp3x7">.css-gqp3x7{width:224px;}</style><div class="hiddenMobile css-gqp3x7 eitzbh74"><style data-emotion-css="1dq6tsi">.css-1dq6tsi{width:100%;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:24px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;background:#fff;}.css-1dq6tsi .rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;-webkit-letter-spacing:1.2px;-moz-letter-spacing:1.2px;-ms-letter-spacing:1.2px;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;border-left-color:rgb(230,236,241);color:#3B454E;}.css-1dq6tsi .rightSideBarUL{margin-top:32px;}.css-1dq6tsi .rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1;border-left-color:rgb(230,236,241);}.css-1dq6tsi .rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;color:#3B454E;}@media only screen and (max-width:50rem){.css-1dq6tsi{width:100%;position:relative;}}</style><aside class="css-1dq6tsi emw6t130"><ul class="rightSideBarUL"><li class="rightSideTitle">CONTENTS</li><style data-emotion-css="10m2n0t">.css-10m2n0t{list-style:none;}.css-10m2n0t a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-10m2n0t a:hover{color:#1ed3c6 !important;}.css-10m2n0t a svg{float:right;margin-right:1rem;}</style><li class="css-10m2n0t emw6t131"><a href="#reactapollosubscriptionssetup" to="#reactapollosubscriptionssetup">React Apollo Subscriptions Setup</a></li></ul></aside></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/subscriptions/1-subscription";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f62b6fc3546e88d16ee5.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/naked_doc/app-f62b6fc3546e88d16ee5.js" async=""></script><script src="/naked_doc/framework-3bef749eac301960e51a.js" async=""></script><script src="/naked_doc/webpack-runtime-421e1ef288e8ca6d1ca9.js" async=""></script><script defer="">
            function navBarClose() {
              document.getElementById("navbar").classList.toggle("responsive");
            }
            document.addEventListener('click',function(e){
              if(e.target && e.target.tagName.toLowerCase() === 'a'){
                navBarClose();
              }
           });
            </script></body></html>